DROP DATABASE IF EXISTS sabori;

CREATE DATABASE sabori;

\c sabori;

CREATE TABLE IF NOT EXISTS stores (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    address TEXT UNIQUE NOT NULL,
    latitude REAL NOT NULL,
    longitude REAL NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS ingredients (
    id SERIAL PRIMARY KEY,
    name TEXT UNIQUE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS stores_ingredients_bridge (
    store_id INTEGER NOT NULL REFERENCES stores(id) ON DELETE CASCADE,
    ingredient_id INTEGER NOT NULL REFERENCES ingredients(id) ON DELETE CASCADE,
    PRIMARY KEY (store_id, ingredient_id),
    last_seen TIMESTAMP WITH TIME ZONE,
    last_seen_by TEXT
);

CREATE TABLE IF NOT EXISTS cuisines (
    id SERIAL PRIMARY KEY,
    name TEXT UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS cuisines_ingredients_bridge (
    ingredient_id INTEGER NOT NULL REFERENCES ingredients(id) ON DELETE CASCADE,
    cuisine_id INTEGER NOT NULL REFERENCES cuisines(id) ON DELETE CASCADE
);

-- Sample data for stores
INSERT INTO stores (name, address, latitude, longitude) VALUES
('Reading Terminal Market', '1136 Arch St, Philadelphia, PA 19107', 39.9540, -75.1590),
('Di Bruno Bros.', '1730 Chestnut St, Philadelphia, PA 19103', 39.9516, -75.1697),
('Whole Foods Market', '2101 Pennsylvania Ave, Philadelphia, PA 19130', 39.9623, -75.1741),
('Acme Markets', '1400 E Passyunk Ave, Philadelphia, PA 19147', 39.9337, -75.1596),
('Sprouts Farmers Market', '1000 S Broad St, Philadelphia, PA 19146', 39.9362, -75.1667),
('Trader Joe''s', '2121 Market St, Philadelphia, PA 19103', 39.9547, -75.1762),
('Giant Heirloom Market', '2303 Bainbridge St, Philadelphia, PA 19146', 39.9436, -75.1787),
('South Square Market', '2221 South St, Philadelphia, PA 19146', 39.9452, -75.1792),
('Riverwards Produce Market', '2200 E Norris St, Philadelphia, PA 19125', 39.9782, -75.1267),
('Italian Market', '919 S 9th St, Philadelphia, PA 19147', 39.9386, -75.1585),
('ShopRite of Whitman Plaza', '330 W Oregon Ave, Philadelphia, PA 19148', 39.9187, -75.1539),
('Aldi', '5200 Whitaker Ave, Philadelphia, PA 19124', 40.0272, -75.1047),
('Weaver''s Way Co-op', '8424 Germantown Ave, Philadelphia, PA 19118', 40.0780, -75.2072),
('The Foodery', '837 N 2nd St, Philadelphia, PA 19123', 39.9676, -75.1428),
('Primal Supply Meats', '1538 E Passyunk Ave, Philadelphia, PA 19147', 39.9307, -75.1632),
('Mariposa Food Co-op', '4824 Baltimore Ave, Philadelphia, PA 19143', 39.9485, -75.2202),
('Kimberton Whole Foods', '214 S 40th St, Philadelphia, PA 19104', 39.9541, -75.2037),
('H Mart', '7050 Terminal Square, Upper Darby, PA 19082', 39.9606, -75.2622),
('NetCost Market', '11701 Bustleton Ave, Philadelphia, PA 19116', 40.1232, -75.0145),
('Produce Junction', '1722 S Broad St, Philadelphia, PA 19145', 39.9277, -75.1702);


INSERT INTO ingredients (name) VALUES
('Basmati Rice'),
('Kimchi'),
('Tahini'),
('Harissa'),
('Miso Paste'),
('Gochujang'),
('Nori'),
('Paneer'),
('Halloumi'),
('Chorizo'),
('Serrano Ham'),
('Prosciutto'),
('Wasabi'),
('Saffron'),
('Sumac'),
('Za''atar'),
('Feta Cheese'),
('Queso Fresco'),
('Tempeh'),
('Tofu'),
('Coconut Milk'),
('Fish Sauce'),
('Tamarind Paste'),
('Plantain'),
('Cassava'),
('Yuca'),
('Ube'),
('Sichuan Peppercorn'),
('Dukkah'),
('Ajvar'),
('Dolma Leaves'),
('Jaggery'),
('Pandan Leaf'),
('Kaffir Lime Leaf'),
('Galangal'),
('Lemongrass'),
('Star Anise'),
('Cardamom'),
('Garam Masala'),
('Berbere'),
('Ras el Hanout'),
('Chimichurri'),
('Piri Piri'),
('Sambal Oelek'),
('Ponzu Sauce'),
('Mirin'),
('Shiso Leaf'),
('Black Garlic'),
('Truffle Oil'),
('Manchego Cheese'),
('Burrata'),
('Ricotta Salata'),
('Yuzu Kosho'),
('Dashi'),
('Sujuk'),
('Labneh'),
('Quark'),
('Matzo Meal'),
('Freekeh'),
('Farro'),
('Teff'),
('Amaranth'),
('Fonio'),
('Ackee'),
('Salt Cod'),
('Lardo'),
('Guanciale'),
('Bottarga'),
('Taleggio'),
('Comté'),
('Gruyère'),
('Raclette'),
('Morcilla'),
('Longanisa'),
('Lap Cheong'),
('Lotus Root'),
('Enoki Mushroom'),
('Shiitake Mushroom'),
('Wood Ear Mushroom'),
('Hijiki'),
('Hijau Leaf'),
('Epazote'),
('Achiote Paste'),
('Chayote'),
('Jicama'),
('Nopales'),
('Salsify'),
('Romanesco'),
('Samphire'),
('Sea Beans'),
('Cloudberry'),
('Lingonberry'),
('Goji Berry'),
('Feijoa'),
('Cherimoya'),
('Salak'),
('Rambutan'),
('Mangosteen'),
('Durian'),
('Jackfruit'),
('Breadfruit'),
('Soursop'),
('Pepino Melon'),
('Dragon Fruit'),
('Taro'),
('Lotus Seed'),
('Water Chestnut');


INSERT INTO cuisines (name) VALUES
('Italian'),
('French'),
('Spanish'),
('Mexican'),
('Chinese'),
('Japanese'),
('Korean'),
('Thai'),
('Vietnamese'),
('Indian'),
('Greek'),
('Turkish'),
('Moroccan'),
('Ethiopian'),
('Lebanese'),
('Persian'),
('Brazilian'),
('Argentinian'),
('Peruvian'),
('Cuban'),
('Jamaican'),
('Caribbean'),
('German'),
('Russian'),
('Polish'),
('Hungarian'),
('Swedish'),
('Norwegian'),
('Finnish');



INSERT INTO stores_ingredients_bridge (store_id, ingredient_id, last_seen, last_seen_by) VALUES
(1, 1, '2023-07-15 10:23:00+00', 'Alice'),
(2, 1, NULL, NULL),
(3, 2, '2023-08-01 14:45:00+00', 'Bob'),
(4, 2, NULL, NULL),
(5, 3, '2023-06-20 09:10:00+00', 'Charlie'),
(6, 4, NULL, NULL),
(7, 5, '2023-09-12 16:30:00+00', 'Diana'),
(8, 6, NULL, NULL),
(9, 7, NULL, NULL),
(10, 8, '2023-05-03 11:00:00+00', 'Eve'),
(11, 9, NULL, NULL),
(12, 10, NULL, NULL),
(13, 11, '2023-04-18 13:15:00+00', 'Frank'),
(14, 12, NULL, NULL),
(15, 13, NULL, NULL),
(16, 14, '2023-03-22 08:50:00+00', 'Grace'),
(17, 15, NULL, NULL),
(18, 16, NULL, NULL),
(19, 17, '2023-02-10 17:40:00+00', 'Heidi'),
(20, 18, NULL, NULL),
(1, 19, NULL, NULL),
(2, 20, '2023-01-05 12:00:00+00', 'Ivan'),
(3, 21, NULL, NULL),
(4, 22, NULL, NULL),
(5, 23, '2023-10-11 15:25:00+00', 'Judy'),
(6, 24, NULL, NULL),
(7, 25, NULL, NULL),
(8, 26, '2023-11-09 09:35:00+00', 'Mallory'),
(9, 27, NULL, NULL),
(10, 28, NULL, NULL),
(11, 29, '2023-12-01 18:10:00+00', 'Niaj'),
(12, 30, NULL, NULL),
(13, 31, NULL, NULL),
(14, 32, '2023-07-27 07:20:00+00', 'Olivia'),
(15, 33, NULL, NULL),
(16, 34, NULL, NULL),
(17, 35, '2023-06-14 20:00:00+00', 'Peggy'),
(18, 36, NULL, NULL),
(19, 37, NULL, NULL),
(20, 38, '2023-05-19 21:45:00+00', 'Rupert'),
(1, 39, NULL, NULL),
(2, 40, NULL, NULL),
(3, 41, '2023-08-23 10:10:00+00', 'Sybil'),
(4, 42, NULL, NULL),
(5, 43, NULL, NULL),
(6, 44, '2023-09-30 13:55:00+00', 'Trent'),
(7, 45, NULL, NULL),
(8, 46, NULL, NULL),
(9, 47, '2023-10-15 16:05:00+00', 'Victor'),
(10, 48, NULL, NULL),
(11, 49, NULL, NULL),
(12, 50, '2023-11-22 19:30:00+00', 'Walter'),
(13, 51, NULL, NULL),
(14, 52, NULL, NULL),
(15, 53, '2023-12-10 08:15:00+00', 'Yvonne'),
(16, 54, NULL, NULL),
(17, 55, NULL, NULL),
(18, 56, '2023-01-29 22:50:00+00', 'Zara'),
(19, 57, NULL, NULL),
(20, 58, NULL, NULL),
(1, 59, '2023-02-14 11:40:00+00', 'Oscar'),
(2, 60, NULL, NULL),
(3, 61, NULL, NULL),
(4, 62, '2023-03-05 14:00:00+00', 'Quentin'),
(5, 63, NULL, NULL),
(6, 64, NULL, NULL),
(7, 65, '2023-04-17 17:25:00+00', 'Rita'),
(8, 66, NULL, NULL),
(9, 67, NULL, NULL),
(10, 68, '2023-05-28 20:35:00+00', 'Steve'),
(11, 69, NULL, NULL),
(12, 70, NULL, NULL),
(13, 71, '2023-06-09 09:50:00+00', 'Tina'),
(14, 72, NULL, NULL),
(15, 73, NULL, NULL),
(16, 74, '2023-07-21 12:10:00+00', 'Uma'),
(17, 75, NULL, NULL),
(18, 76, NULL, NULL),
(19, 77, '2023-08-13 15:30:00+00', 'Vince'),
(20, 78, NULL, NULL),
(1, 79, NULL, NULL),
(2, 80, '2023-09-04 18:45:00+00', 'Wendy'),
(3, 81, NULL, NULL),
(4, 82, NULL, NULL),
(5, 83, '2023-10-16 21:00:00+00', 'Xavier'),
(6, 84, NULL, NULL),
(7, 85, NULL, NULL),
(8, 86, '2023-11-27 08:20:00+00', 'Yara'),
(9, 87, NULL, NULL),
(10, 88, NULL, NULL),
(11, 89, '2023-12-19 11:35:00+00', 'Zane'),
(12, 90, NULL, NULL),
(13, 91, NULL, NULL),
(14, 92, '2023-01-08 14:50:00+00', 'Aaron'),
(15, 93, NULL, NULL),
(16, 94, NULL, NULL),
(17, 95, '2023-02-22 17:05:00+00', 'Bella'),
(18, 96, NULL, NULL),
(19, 97, NULL, NULL),
(20, 98, '2023-03-16 20:20:00+00', 'Carl'),
(1, 99, NULL, NULL),
(2, 100, NULL, NULL),

-- Some ingredients in multiple stores
(3, 1, '2023-04-01 10:00:00+00', 'Derek'),
(4, 1, NULL, NULL),
(5, 2, '2023-05-12 11:30:00+00', 'Elena'),
(6, 3, NULL, NULL),
(7, 4, '2023-06-23 13:00:00+00', 'Felix'),
(8, 5, NULL, NULL),
(9, 6, '2023-07-04 14:30:00+00', 'Gina'),
(10, 7, NULL, NULL),
(11, 8, '2023-08-15 16:00:00+00', 'Hank'),
(12, 9, NULL, NULL),
(13, 10, '2023-09-26 17:30:00+00', 'Ivy'),
(14, 11, NULL, NULL),
(15, 12, '2023-10-07 19:00:00+00', 'Jonas'),
(16, 13, NULL, NULL),
(17, 14, '2023-11-18 20:30:00+00', 'Kara'),
(18, 15, NULL, NULL),
(19, 16, '2023-12-29 22:00:00+00', 'Liam'),
(20, 17, NULL, NULL);
